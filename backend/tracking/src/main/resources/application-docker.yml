spring:
  datasource:
    url: jdbc:postgresql://postgis:5432/fleet_tracking
    username: postgres
    password: Qwerty@123

  kafka:
    bootstrap-servers: kafka:9092
    streams:
      application-id: fleet-tracking-streams-${HOSTNAME:docker}
      properties:
        processing.guarantee: exactly_once_v2
        commit.interval.ms: 1000
        num.stream.threads: 2
        # Resilience settings for container environments
        request.timeout.ms: 60000
        session.timeout.ms: 30000
        max.poll.interval.ms: 300000
        retries: 10
        retry.backoff.ms: 1000
        reconnect.backoff.max.ms: 10000
      state-dir: /tmp/kafka-streams/${spring.kafka.streams.application-id}

  webflux:
    base-path: /api

# =============================================================================
# APPLICATION-SPECIFIC CONFIGURATION (Overrides or additions for Docker)
# =============================================================================

vehicle:
  status:
    online:
      threshold:
        minutes: 1
    idle:
      threshold:
        minutes: 10
    offline:
      threshold:
        minutes: 30

speeding:
  threshold:
    kph: 80

idle:
  threshold:
    minutes: 2

simulator:
  enabled: true
  vehicle-count: 10
  update-interval-ms: 2000

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

server:
  port: 8080